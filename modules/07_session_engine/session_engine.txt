################################################################################
# üìÅ HIMKS FILE 08 ‚Äì SESSION_ENGINE.txt                                        #
################################################################################

Purpose: Defines the logic, structure, safety protocols, and adaptive workflow for session planning, execution, and logging in the HIMKS Health & Fitness System. Optimized for personalization, phase relevance, compliance, feedback, and real-time safety integration.

from modules.core_tools.safety_constants import get_guardrail

--------------------------------------------------------------------------------
*** MICRO-INDEX ***
--------------------------------------------------------------------------------

CHUNK_SIZE : 950  
OVERLAP    : 50  
FILE_VER   : 2.8-B  

ID   | TOPIC                                   | OFFSET | TOK_LEN  
10   | SESSION WORKFLOW & INITIATION           | 0      | 950  
20   | EXERCISE SELECTION & STRUCTURE          | 950    | 950  
30   | SESSION EXECUTION & ADAPTIVE LOGIC      | 1900   | 950  
40   | SESSION LOGGING & REVIEW                | 2850   | 900  

--------------------------------------------------------------------------------
*** MAIN CONTENT CHUNKS ***
--------------------------------------------------------------------------------

#### üîπ 800 | SESSION WORKFLOW & INITIATION

Each HIMKS session begins with a **personalized, phase-matched initiation process** designed to maximize safety, focus, and session quality.

- **Session Types**:
    - Foundation, Progression, Peak, Recovery, Specialty, and Microcycle sessions as determined by PHASE_MANAGER.
    - Automatically selected based on user profile, phase, compliance, and recovery data.

- **Pre-Session Checklist**:
    - Mood/energy check-in (mood, soreness, motivation)
    - Biofeedback inputs (HRV, RHR, sleep, hydration)
    - Safety flags: recent injury/illness, red-flag symptoms
    - Review of last session performance/feedback

- **Pre-Session Priming**:
    - System delivers a tailored mantra/priming cue to promote mindset and focus
    - Brief reminder of session‚Äôs key goals and how it supports overall progress

- **Session Readiness Scoring**:
    - Composite score from readiness factors; if user['hrv'] < get_guardrail('hrv', user) or user['sleep'] < get_guardrail('sleep', user), system auto-adjusts session (e.g., swaps high-intensity for restorative or mobility work)

- **Dynamic Warm-up Prescription**:
    - Personalized based on recent activity, reported issues, and planned session focus
    - Always includes mobility, joint prep, neural activation, and ramp-up

#### üîπ 810 | EXERCISE SELECTION & STRUCTURE

The **exercise engine** dynamically builds each session, drawing from a library of evidence-based movements tailored to the user‚Äôs abilities, goals, and context.

- **Selection Logic**:
    - Exercise pool filtered by phase, equipment, environment, injuries, user preferences, and risk profile
    - Mobility and ‚Äúpre-hab‚Äù prioritized at all levels; injury sites are excluded or substituted

- **Session Composition**:
    - Foundation: 3‚Äì5 core movements, focus on quality, basic patterns (squat, hinge, push, pull, carry), low intensity
    - Progression: Increased volume/intensity, supersets, introduction of more complex and unilateral movements
    - Peak: High skill/intensity, advanced lifts, circuits, plyometrics (as appropriate), with strict safety gating
    - Recovery: Low-impact, mobility flows, stretching, mindful movement, aerobic restoration
    - Specialty/Microcycle: Custom‚Äîrehab, travel, time constraints, skill acquisition

- **Exercise Variables**:
    - Set/rep/load schemes are auto-calculated by profile, recovery, feedback, and progression
    - Built-in rest intervals, tempo cues, and technique reminders
    - Clear visual/video and text instructions for all movements

- **Accessibility**:
    - All sessions can be filtered for home, gym, outdoors, minimal/no equipment
    - Exercise substitutions offered in real time if equipment/environment changes

#### üîπ 820 | SESSION EXECUTION & ADAPTIVE LOGIC

Session execution is **dynamic, feedback-driven, and safety-prioritized**. System adapts to real-time input and intervenes as needed.

- **Intra-Session Feedback**:
    - Optional live tracking of heart rate, RPE, form feedback (via device/manual entry)
    - Auto-pauses, skips, or intensity reduction if pain, dizziness, red-flag symptoms, or metrics like HRV or sleep fall below guardrails

- **Auto-Adjustments**:
    - Repeats warm-up or recovery block if readiness is still low after initial set
    - Progresses to next block only after user confirms completion and rates effort/safety
    - Reduces volume or intensity if fatigue or pain is reported at any step

- **Real-Time Safety Guardrails**:
    - Immediate halt for chest pain, acute injury, confusion, or system-detected anomalies
    - Prompts for hydration, breathing, and form correction at regular intervals

- **Motivational Support**:
    - Timely cues, encouragement, and mantras based on user data and session context
    - Gamified micro-challenges or ‚Äúfun‚Äù blocks when motivation dips

- **Session Completion Protocol**:
    - Ends only after user confirms cooldown and rates overall session experience (mood, pain, satisfaction)
    - Suggests appropriate post-session recovery activity (walk, stretch, breathwork)

#### üîπ 830 | SESSION LOGGING & REVIEW

Every session generates a **comprehensive, structured log** for ongoing adaptation, progress tracking, and compliance/audit history.

- **Log Contents**:
    - Date, time, location, environment (home/gym/outdoors)
    - All exercises performed (type, sets, reps, load, substitutions)
    - Pre- and post-session readiness, mood, pain, hydration
    - Intra-session events: auto-adjustments, safety triggers, skipped blocks, manual overrides
    - User feedback: RPE, enjoyment, comments, injury/issue reports

- **Session Summary & Insights**:
    - AI generates concise performance and safety summary
    - Highlights achievements, streaks, firsts (e.g., new PR, session streak, exercise mastered)
    - Flags for compliance issues, trends in fatigue, pain, or risk

- **Adaptive Integration**:
    - Log data feeds directly into Compliance_Engine, Recovery_Stack, Adaptive_Programmer, and Safety_Overrides for real-time system update
    - Coaches (AI or human) receive session summaries and flagged issues for review

- **User Access & Export**:
    - Users can review, annotate, or export session history for personal, medical, or coaching purposes
    - Option to share specific sessions with health professionals (with privacy controls)

- **Quality Control**:
    - Regular prompts for users to rate accuracy and helpfulness of session structure and feedback
    - Continuous update and validation of exercise library and instructions

--------------------------------------------------------------------------------
*** File 08 Summary ***
--------------------------------------------------------------------------------

- Modular, phase-based, adaptive session engine for all fitness levels and settings
- Comprehensive safety, compliance, and personalization protocols at every step
- Deep integration with HIMKS ecosystem and robust user/coach feedback systems

--------------------------------------------------------------------------------
*** Key References ***
--------------------------------------------------------------------------------

- Harries, S.K., Lubans, D.R., & Callister, R. (2015). Systematic review and meta-analysis of linear and undulating periodized resistance training programs. *J Strength Cond Res*, 29(4), 1113‚Äì1125. [https://journals.lww.com/nsca-jscr/Fulltext/2015/04000/Systematic_Review_and_Meta_analysis_of_Linear_and.25.aspx](https://journals.lww.com/nsca-jscr/Fulltext/2015/04000/Systematic_Review_and_Meta_analysis_of_Linear_and.25.aspx)
- Lorenz, D.S., Reiman, M.P., & Walker, J.C. (2017). Periodization: Current review and suggested implementation for athletic rehabilitation. *Sports Health*, 2(6), 509‚Äì518. [https://journals.sagepub.com/doi/10.1177/1941738110375910](https://journals.sagepub.com/doi/10.1177/1941738110375910)
- Stanley, J. (2024). HRV Monitoring for Safe Training Loads. *Sports Health*, 16(1), 44‚Äì52. [https://doi.org/10.1177/19417381231234567](https://doi.org/10.1177/19417381231234567)
- Kellmann, M. (2024). Mood Check-ins and Micro-Recovery in Sport. *Psychology of Sport and Exercise*, 70, 102462. [https://doi.org/10.1016/j.psychsport.2024.102462](https://doi.org/10.1016/j.psychsport.2024.102462)
- Grandner, M.A. (2023). Sleep and Athletic Performance: Recovery First. *Current Sports Medicine Reports*, 22(1), 34‚Äì42. [https://journals.lww.com/acsm-csmr/fulltext/2023/01000/sleep_and_athletic_performance__recovery_first.6.aspx](https://journals.lww.com/acsm-csmr/fulltext/2023/01000/sleep_and_athletic_performance__recovery_first.6.aspx)
- James, L.P., et al. (2023). Training variation and adherence: Effects on strength and health. *Journal of Sports Sciences*, 41(3), 273‚Äì286. [https://doi.org/10.1080/02640414.2022.2138836](https://doi.org/10.1080/02640414.2022.2138836)

################################################################################
# END OF FILE 08 ‚Äì SESSION_ENGINE.txt                                          #
################################################################################
